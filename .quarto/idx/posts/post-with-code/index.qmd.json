{"title":"Out of balance","markdown":{"yaml":{"title":"Out of balance","author":"Jakob Prossliner","date":"2023-11-25","categories":["imbalance","analysis"],"image":"image.jpg","format":{"html":{"code-fold":true}},"message":false,"warning":false},"headingText":"Picasso participation of Terna","containsRefs":false,"markdown":"\n\n```{r}\nlibrary(tidyverse)\nlibrary(ospowertrader)\nlibrary(lubridate)\nlibrary(timetk)\nlibrary(arrow)\n```\n\n\n```{r}\napg_prices <- arrow::read_parquet(\"./data/apg_imbalance_prices.parquet\")\nterna_prices <- arrow::read_parquet(\"./data/terna_imbalance_prices.parquet\")\n\ncombined_prices <- apg_prices %>% \n  inner_join(terna_prices, by = c(\"df\" = \"reference_date\")) %>% \n  select(df, apg_price = ae_price, terna_price = unbalance_price_EURxMWh) \n\ncombined_prices %>% \n  pivot_longer(-df) %>% \n  timetk::plot_time_series(\n    df, value, name, .smooth = FALSE, .title = \"APG vs Terna (1)\"\n  )\n```\n\nThis graph shows pretty well the impact of Terna's participation to the Picasso platform. While large spikes, which were already common in the Austrian Control Area, were unheard of in Italy, after the 19th of July they became relatively common in Italy too.\n\n```{r}\n\ncombined_prices %>% \n  ggplot(aes(apg_price, terna_price))+\n  stat_binhex(bins = 50)+\n  scale_fill_gradient(low = \"blue\", high = \"red\")+\n  theme_bw()+\n  ggtitle(\"APG vs Terna (2)\")\n\n\n```\n\nHere we can see there is a lot of covariance for extreme values, notice (!) the difference in scale. APG tends to present much extremer imbalance prices.\n\n```{r}\ncombined_prices %>% \n  filter(abs(apg_price) < 300 & abs(terna_price) < 300) %>% \n  ggplot()+\n  geom_histogram(aes(apg_price), alpha = 0.8, fill = \"red\", bins = 200)+\n  geom_histogram(aes(terna_price), alpha = 0.2, colour = \"lightblue\", bins = 200)+\n  theme_bw()+\n  ggtitle(label = \"APG vs Terna (distribution)\")\n```\n\nVery surprising - no idea why the distribution is so different.\n\nUnder normal circumstances/normal price levels for imbalance prices - APG seems to have a much smoother distribution. Terna presents more of a multimodal distribution, peaking around zero and two more peaks - probably values set around the MGP/day-ahead price.\n\n```{r}\n\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","theme":"cosmo","title-block-banner":true,"title":"Out of balance","author":"Jakob Prossliner","date":"2023-11-25","categories":["imbalance","analysis"],"image":"image.jpg","message":false},"extensions":{"book":{"multiFile":true}}}}}